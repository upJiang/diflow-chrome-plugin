import fs from 'fs'
import path from 'path'

// 创建一个简单但有效的 PNG 图标 (16x16 蓝色方块)
function createIcon(size) {
  // 创建最小有效 PNG（蓝色方块）
  const minimalPNG = [
    0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A,
    0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52,
    0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x10,
    0x08, 0x02, 0x00, 0x00, 0x00, 0x90, 0x91, 0x68,
    0x36, 0x00, 0x00, 0x00, 0x3C, 0x49, 0x44, 0x41,
    0x54, 0x28, 0x15, 0x63, 0x64, 0x60, 0xF8, 0x0F,
    0xC3, 0x50, 0x30, 0x0A, 0x46, 0xC1, 0x28, 0x18,
    0x05, 0xA3, 0x60, 0x14, 0x8C, 0x82, 0x51, 0x30,
    0x0A, 0x46, 0xC1, 0x28, 0x18, 0x05, 0xA3, 0x60,
    0x14, 0x8C, 0x82, 0x51, 0x30, 0x0A, 0x46, 0xC1,
    0x28, 0x18, 0x05, 0xA3, 0x60, 0x14, 0x8C, 0x82,
    0x51, 0x30, 0x0A, 0x46, 0xC1, 0x28, 0x18, 0x05,
    0x00, 0x00, 0x04, 0x10, 0x00, 0x01, 0x27, 0xDF,
    0xBE, 0x07, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45,
    0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82
  ]
  
  return Buffer.from(minimalPNG)
}

// 创建到 public/icons 目录（源目录）
const iconsDir = './public/icons'
const sizes = [16, 48, 128]

// 确保目录存在
if (!fs.existsSync(iconsDir)) {
  fs.mkdirSync(iconsDir, { recursive: true })
}

// 为每个尺寸创建 PNG 文件
sizes.forEach(size => {
  const iconBuffer = createIcon(size)
  const iconPath = path.join(iconsDir, `icon${size}.png`)
  fs.writeFileSync(iconPath, iconBuffer)
  console.log(`✅ 创建图标: ${iconPath} (${iconBuffer.length} bytes)`)
})

console.log('🎉 图标创建完成！图标已保存到 public/icons/ 目录')
console.log('📁 构建时会自动复制到 dist/icons/ 目录')
console.log('💡 提示: 可以直接替换 public/icons/ 目录中的文件来使用自定义图标') 