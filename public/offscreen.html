<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Diflow Plugin Offscreen Document</title>
</head>
<body>
  <script>
    // 监听来自background的消息
    chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
      if (message.type === 'COPY_TO_CLIPBOARD') {
        copyToClipboard(message.text).then(sendResponse)
        return true // 表示异步响应
      }
    })

    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text)
        return { success: true }
      } catch (error) {
        console.error('Failed to copy to clipboard:', error)
        return { success: false, error: error.message }
      }
    }
  </script>
</body>
</html>
